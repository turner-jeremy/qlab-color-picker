const QLAB4_COLORS = [
  {
    "color": "scarlet",
    "display": "Scarlet",
    "dark": "hsl(2, 21%, 24%)",
    "light": "hsl(3, 18%, 26%)",
    "highlight": "hsl(2, 79%, 61%)"
  },
  {
    "color": "red",
    "display": "Red",
    "dark": "hsl(7, 21%, 24%)",
    "light": "hsl(5, 19%, 26%)",
    "highlight": "hsl(5, 81%, 61%)"
  },
  {
    "color": "vermilion",
    "display": "Vermilion",
    "dark": "hsl(14, 19%, 23%)",
    "light": "hsl(8, 17%, 25%)",
    "highlight": "hsl(10, 66%, 58%)"
  },
  {
    "color": "rufous",
    "display": "Rufous",
    "dark": "hsl(16, 21%, 20%)",
    "light": "hsl(11, 18%, 23%)",
    "highlight": "hsl(13, 73%, 39%)"
  },
  {
    "color": "coral",
    "display": "Coral",
    "dark": "hsl(21, 16%, 25%)",
    "light": "hsl(20, 15%, 27%)",
    "highlight": "hsl(20, 82%, 68%)"
  },
  {
    "color": "bastardAmber",
    "display": "Bastard Amber",
    "dark": "hsl(23, 6%, 27%)",
    "light": "hsl(27, 6%, 30%)",
    "highlight": "hsl(18, 77%, 86%)"
  },
  {
    "color": "ochre",
    "display": "Ochre",
    "dark": "hsl(33, 17%, 23%)",
    "light": "hsl(34, 17%, 25%)",
    "highlight": "hsl(33, 57%, 52%)"
  },
  {
    "color": "taupe",
    "display": "Taupe",
    "dark": "hsl(33, 7%, 24%)",
    "light": "hsl(26, 5%, 26%)",
    "highlight": "hsl(28, 28%, 62%)"
  },
  {
    "color": "bisque",
    "display": "Bisque",
    "dark": "hsl(34, 5%, 28%)",
    "light": "hsl(34, 5%, 30%)",
    "highlight": "hsl(36, 84%, 90%)"
  },
  {
    "color": "orange",
    "display": "Orange",
    "dark": "hsl(36, 23%, 24%)",
    "light": "hsl(33, 22%, 26%)",
    "highlight": "hsl(36, 88%, 59%)"
  },
  {
    "color": "fulvous",
    "display": "Fulvous",
    "dark": "hsl(37, 22%, 23%)",
    "light": "hsl(37, 21%, 25%)",
    "highlight": "hsl(36, 71%, 54%)"
  },
  {
    "color": "wenge",
    "display": "Wenge",
    "dark": "hsl(40, 3%, 21%)",
    "light": "hsl(15, 3%, 23%)",
    "highlight": "hsl(14, 8%, 43%)"
  },
  {
    "color": "sage",
    "display": "Sage",
    "dark": "hsl(48, 4%, 25%)",
    "light": "hsl(48, 4%, 27%)",
    "highlight": "hsl(56, 26%, 70%)"
  },
  {
    "color": "maize",
    "display": "Maize",
    "dark": "hsl(53, 14%, 26%)",
    "light": "hsl(53, 13%, 28%)",
    "highlight": "hsl(54, 84%, 73%)"
  },
  {
    "color": "edgecombGray",
    "display": "Edgecomb Gray",
    "dark": "hsl(60, 1%, 27%)",
    "light": "hsl(60, 1%, 29%)",
    "highlight": "hsl(41, 21%, 85%)"
  },
  {
    "color": "ecru",
    "display": "Ecru",
    "dark": "hsl(60, 5%, 25%)",
    "light": "hsl(60, 4%, 27%)",
    "highlight": "hsl(45, 32%, 69%)"
  },
  {
    "color": "olive",
    "display": "Olive",
    "dark": "hsl(64, 17%, 20%)",
    "light": "hsl(64, 15%, 22%)",
    "highlight": "hsl(59, 54%, 37%)"
  },
  {
    "color": "chartreuse",
    "display": "Chartreuse",
    "dark": "hsl(67, 21%, 24%)",
    "light": "hsl(67, 19%, 26%)",
    "highlight": "hsl(66, 92%, 64%)"
  },
  {
    "color": "avocado",
    "display": "Avocado",
    "dark": "hsl(76, 15%, 20%)",
    "light": "hsl(81, 15%, 22%)",
    "highlight": "hsl(78, 57%, 36%)"
  },
  {
    "color": "seaFoamGreen",
    "display": "Sea Foam Green",
    "dark": "hsl(100, 2%, 27%)",
    "light": "hsl(120, 3%, 29%)",
    "highlight": "hsl(106, 34%, 85%)"
  },
  {
    "color": "green",
    "display": "Green",
    "dark": "hsl(117, 17%, 23%)",
    "light": "hsl(114, 16%, 25%)",
    "highlight": "hsl(114, 57%, 55%)"
  },
  {
    "color": "celadon",
    "display": "Celadon",
    "dark": "hsl(120, 4%, 27%)",
    "light": "hsl(132, 3%, 29%)",
    "highlight": "hsl(118, 38%, 82%)"
  },
  {
    "color": "viridian",
    "display": "Viridian",
    "dark": "hsl(158, 7%, 22%)",
    "light": "hsl(163, 6%, 24%)",
    "highlight": "hsl(160, 20%, 47%)"
  },
  {
    "color": "verdigris",
    "display": "Verdigris",
    "dark": "hsl(175, 10%, 24%)",
    "light": "hsl(180, 8%, 25%)",
    "highlight": "hsl(179, 36%, 59%)"
  },
  {
    "color": "skyblue",
    "display": "SkyBlue",
    "dark": "hsl(202, 8%, 26%)",
    "light": "hsl(196, 8%, 28%)",
    "highlight": "hsl(199, 64%, 78%)"
  },
  {
    "color": "cerulean",
    "display": "Cerulean",
    "dark": "hsl(203, 16%, 22%)",
    "light": "hsl(198, 14%, 24%)",
    "highlight": "hsl(199, 51%, 46%)"
  },
  {
    "color": "glaucous",
    "display": "Glaucous",
    "dark": "hsl(213, 7%, 24%)",
    "light": "hsl(218, 8%, 26%)",
    "highlight": "hsl(217, 34%, 60%)"
  },
  {
    "color": "zaffre",
    "display": "Zaffre",
    "dark": "hsl(224, 22%, 20%)",
    "light": "hsl(226, 19%, 22%)",
    "highlight": "hsl(227, 81%, 38%)"
  },
  {
    "color": "blue",
    "display": "Blue",
    "dark": "hsl(228, 17%, 24%)",
    "light": "hsl(231, 15%, 26%)",
    "highlight": "hsl(228, 63%, 60%)"
  },
  {
    "color": "indigo",
    "display": "Indigo",
    "dark": "hsl(240, 8%, 23%)",
    "light": "hsl(233, 7%, 25%)",
    "highlight": "hsl(243, 25%, 53%)"
  },
  {
    "color": "gray",
    "display": "Grey",
    "dark": "hsl(270, 2%, 24%)",
    "light": "hsl(240, 1%, 26%)",
    "highlight": "hsl(255, 6%, 64%)"
  },
  {
    "color": "mauve",
    "display": "Mauve",
    "dark": "hsl(270, 6%, 28%)",
    "light": "hsl(273, 6%, 30%)",
    "highlight": "hsl(272, 83%, 86%)"
  },
  {
    "color": "purple",
    "display": "Purple",
    "dark": "hsl(284, 17%, 22%)",
    "light": "hsl(283, 17%, 24%)",
    "highlight": "hsl(286, 55%, 47%)"
  },
  {
    "color": "lilac",
    "display": "Lilac",
    "dark": "hsl(285, 3%, 26%)",
    "light": "hsl(288, 3%, 28%)",
    "highlight": "hsl(293, 20%, 74%)"
  },
  {
    "color": "fuchsia",
    "display": "Fuchsia",
    "dark": "hsl(294, 15%, 25%)",
    "light": "hsl(297, 15%, 27%)",
    "highlight": "hsl(296, 88%, 70%)"
  },
  {
    "color": "puce",
    "display": "Puce",
    "dark": "hsl(350, 5%, 25%)",
    "light": "hsl(0, 4%, 27%)",
    "highlight": "hsl(346, 33%, 71%)"
  }
];

const QLAB5_COLORS = [
  {
    "color": "scarlet",
    "display": "Scarlet",
    "dark": "hsl(0, 21%, 23%)",
    "light": "hsl(0, 19%, 26%)",
    "highlight": "hsl(0, 61%, 52%)"
  },
  {
    "color": "red",
    "display": "Red",
    "dark": "hsl(3, 20%, 23%)",
    "light": "hsl(3, 18%, 26%)",
    "highlight": "hsl(2, 60%, 52%)"
  },
  {
    "color": "rufous",
    "display": "Rufous",
    "dark": "hsl(6, 20%, 20%)",
    "light": "hsl(9, 17%, 22%)",
    "highlight": "hsl(9, 73%, 31%)"
  },
  {
    "color": "vermilion",
    "display": "Vermilion",
    "dark": "hsl(8, 19%, 22%)",
    "light": "hsl(5, 17%, 25%)",
    "highlight": "hsl(7, 55%, 48%)"
  },
  {
    "color": "peach",
    "display": "Peach",
    "dark": "hsl(16, 18%, 24%)",
    "light": "hsl(19, 16%, 27%)",
    "highlight": "hsl(18, 59%, 58%)"
  },
  {
    "color": "coral",
    "display": "Coral",
    "dark": "hsl(16, 19%, 24%)",
    "light": "hsl(18, 17%, 26%)",
    "highlight": "hsl(17, 60%, 57%)"
  },
  {
    "color": "bastardAmber",
    "display": "Bastard Amber",
    "dark": "hsl(18, 7%, 27%)",
    "light": "hsl(20, 6%, 30%)",
    "highlight": "hsl(18, 45%, 75%)"
  },
  {
    "color": "chestnut",
    "display": "Chestnut",
    "dark": "hsl(20, 10%, 17%)",
    "light": "hsl(18, 10%, 20%)",
    "highlight": "hsl(21, 68%, 17%)"
  },
  {
    "color": "edgecombGray",
    "display": "Edgecomb Gray",
    "dark": "hsl(20, 2%, 27%)",
    "light": "hsl(40, 2%, 29%)",
    "highlight": "hsl(41, 11%, 73%)"
  },
  {
    "color": "wenge",
    "display": "Wenge",
    "dark": "hsl(20, 3%, 20%)",
    "light": "hsl(0, 2%, 22%)",
    "highlight": "hsl(9, 8%, 31%)"
  },
  {
    "color": "chocolate",
    "display": "Chocolate",
    "dark": "hsl(20, 7%, 18%)",
    "light": "hsl(17, 7%, 21%)",
    "highlight": "hsl(19, 35%, 21%)"
  },
  {
    "color": "taupe",
    "display": "Taupe",
    "dark": "hsl(27, 8%, 23%)",
    "light": "hsl(23, 6%, 25%)",
    "highlight": "hsl(28, 21%, 49%)"
  },
  {
    "color": "ochre",
    "display": "Ochre",
    "dark": "hsl(29, 19%, 22%)",
    "light": "hsl(31, 17%, 24%)",
    "highlight": "hsl(30, 55%, 43%)"
  },
  {
    "color": "bisque",
    "display": "Bisque",
    "dark": "hsl(30, 6%, 28%)",
    "light": "hsl(34, 5%, 30%)",
    "highlight": "hsl(35, 42%, 79%)"
  },
  {
    "color": "orange",
    "display": "Orange",
    "dark": "hsl(32, 24%, 23%)",
    "light": "hsl(32, 21%, 26%)",
    "highlight": "hsl(32, 67%, 52%)"
  },
  {
    "color": "fulvous",
    "display": "Fulvous",
    "dark": "hsl(34, 22%, 22%)",
    "light": "hsl(33, 19%, 25%)",
    "highlight": "hsl(32, 63%, 46%)"
  },
  {
    "color": "marigold",
    "display": "Marigold",
    "dark": "hsl(36, 23%, 23%)",
    "light": "hsl(36, 21%, 26%)",
    "highlight": "hsl(35, 66%, 52%)"
  },
  {
    "color": "ecru",
    "display": "Ecru",
    "dark": "hsl(40, 7%, 24%)",
    "light": "hsl(45, 6%, 27%)",
    "highlight": "hsl(47, 23%, 56%)"
  },
  {
    "color": "sage",
    "display": "Sage",
    "dark": "hsl(51, 6%, 24%)",
    "light": "hsl(60, 4%, 27%)",
    "highlight": "hsl(55, 18%, 58%)"
  },
  {
    "color": "maize",
    "display": "Maize",
    "dark": "hsl(54, 16%, 25%)",
    "light": "hsl(54, 13%, 28%)",
    "highlight": "hsl(54, 62%, 63%)"
  },
  {
    "color": "yellow",
    "display": "Yellow",
    "dark": "hsl(58, 20%, 24%)",
    "light": "hsl(55, 19%, 26%)",
    "highlight": "hsl(54, 67%, 57%)"
  },
  {
    "color": "olive",
    "display": "Olive",
    "dark": "hsl(60, 14%, 19%)",
    "light": "hsl(60, 13%, 22%)",
    "highlight": "hsl(60, 54%, 29%)"
  },
  {
    "color": "chartreuse",
    "display": "Chartreuse",
    "dark": "hsl(69, 21%, 24%)",
    "light": "hsl(67, 18%, 27%)",
    "highlight": "hsl(69, 72%, 58%)"
  },
  {
    "color": "avocado",
    "display": "Avocado",
    "dark": "hsl(81, 14%, 19%)",
    "light": "hsl(86, 13%, 22%)",
    "highlight": "hsl(81, 55%, 29%)"
  },
  {
    "color": "seafoamGreen",
    "display": "Seafoam Green",
    "dark": "hsl(105, 3%, 27%)",
    "light": "hsl(108, 3%, 29%)",
    "highlight": "hsl(106, 21%, 73%)"
  },
  {
    "color": "green",
    "display": "Green",
    "dark": "hsl(108, 18%, 22%)",
    "light": "hsl(111, 16%, 25%)",
    "highlight": "hsl(109, 50%, 47%)"
  },
  {
    "color": "celadon",
    "display": "Celadon",
    "dark": "hsl(120, 4%, 26%)",
    "light": "hsl(111, 5%, 29%)",
    "highlight": "hsl(115, 26%, 70%)"
  },
  {
    "color": "forest",
    "display": "Forest",
    "dark": "hsl(120, 8%, 18%)",
    "light": "hsl(120, 7%, 21%)",
    "highlight": "hsl(116, 41%, 21%)"
  },
  {
    "color": "viridian",
    "display": "Viridian",
    "dark": "hsl(154, 7%, 21%)",
    "light": "hsl(154, 6%, 23%)",
    "highlight": "hsl(157, 22%, 37%)"
  },
  {
    "color": "verdigris",
    "display": "Verdigris",
    "dark": "hsl(180, 10%, 23%)",
    "light": "hsl(175, 9%, 25%)",
    "highlight": "hsl(176, 28%, 48%)"
  },
  {
    "color": "cyan",
    "display": "Cyan",
    "dark": "hsl(180, 15%, 24%)",
    "light": "hsl(180, 14%, 27%)",
    "highlight": "hsl(181, 51%, 59%)"
  },
  {
    "color": "cerulean",
    "display": "Cerulean",
    "dark": "hsl(203, 15%, 21%)",
    "light": "hsl(205, 14%, 23%)",
    "highlight": "hsl(203, 51%, 38%)"
  },
  {
    "color": "skyBlue",
    "display": "Sky Blue",
    "dark": "hsl(205, 9%, 25%)",
    "light": "hsl(203, 9%, 28%)",
    "highlight": "hsl(206, 40%, 65%)"
  },
  {
    "color": "glaucous",
    "display": "Glaucous",
    "dark": "hsl(218, 10%, 23%)",
    "light": "hsl(213, 9%, 25%)",
    "highlight": "hsl(219, 27%, 48%)"
  },
  {
    "color": "lucasBlue",
    "display": "Lucas Blue",
    "dark": "hsl(222, 11%, 18%)",
    "light": "hsl(216, 10%, 20%)",
    "highlight": "hsl(215, 69%, 18%)"
  },
  {
    "color": "blue",
    "display": "Blue",
    "dark": "hsl(231, 18%, 23%)",
    "light": "hsl(231, 16%, 25%)",
    "highlight": "hsl(232, 50%, 49%)"
  },
  {
    "color": "midnight",
    "display": "Midnight",
    "dark": "hsl(236, 16%, 19%)",
    "light": "hsl(240, 13%, 22%)",
    "highlight": "hsl(10, 75%, 2%)"
  },
  {
    "color": "periwinkle",
    "display": "Periwinkle",
    "dark": "hsl(246, 17%, 25%)",
    "light": "hsl(246, 15%, 27%)",
    "highlight": "hsl(245, 62%, 61%)"
  },
  {
    "color": "indigo",
    "display": "Indigo",
    "dark": "hsl(246, 9%, 21%)",
    "light": "hsl(247, 7%, 24%)",
    "highlight": "hsl(244, 28%, 41%)"
  },
  {
    "color": "gray",
    "display": "Gray",
    "dark": "hsl(260, 3%, 23%)",
    "light": "hsl(240, 2%, 25%)",
    "highlight": "hsl(258, 5%, 51%)"
  },
  {
    "color": "mauve",
    "display": "Mauve",
    "dark": "hsl(270, 7%, 27%)",
    "light": "hsl(273, 7%, 30%)",
    "highlight": "hsl(271, 52%, 75%)"
  },
  {
    "color": "purple",
    "display": "Purple",
    "dark": "hsl(284, 21%, 20%)",
    "light": "hsl(286, 19%, 23%)",
    "highlight": "hsl(285, 75%, 34%)"
  },
  {
    "color": "violet",
    "display": "Violet",
    "dark": "hsl(284, 22%, 20%)",
    "light": "hsl(286, 19%, 23%)",
    "highlight": "hsl(285, 74%, 37%)"
  },
  {
    "color": "lilac",
    "display": "Lilac",
    "dark": "hsl(288, 4%, 25%)",
    "light": "hsl(300, 4%, 27%)",
    "highlight": "hsl(294, 15%, 62%)"
  },
  {
    "color": "lavender",
    "display": "Lavender",
    "dark": "hsl(290, 9%, 25%)",
    "light": "hsl(285, 8%, 28%)",
    "highlight": "hsl(286, 38%, 64%)"
  },
  {
    "color": "plum",
    "display": "Plum",
    "dark": "hsl(293, 11%, 16%)",
    "light": "hsl(287, 9%, 19%)",
    "highlight": "hsl(292, 86%, 12%)"
  },
  {
    "color": "fuchsia",
    "display": "Fuchsia",
    "dark": "hsl(295, 20%, 24%)",
    "light": "hsl(298, 18%, 27%)",
    "highlight": "hsl(295, 68%, 57%)"
  },
  {
    "color": "magenta",
    "display": "Magenta",
    "dark": "hsl(322, 21%, 21%)",
    "light": "hsl(325, 18%, 24%)",
    "highlight": "hsl(324, 65%, 39%)"
  },
  {
    "color": "berry",
    "display": "Berry",
    "dark": "hsl(324, 11%, 18%)",
    "light": "hsl(318, 9%, 21%)",
    "highlight": "hsl(324, 50%, 24%)"
  },
  {
    "color": "hotPink",
    "display": "Hot Pink",
    "dark": "hsl(336, 24%, 23%)",
    "light": "hsl(333, 21%, 25%)",
    "highlight": "hsl(335, 64%, 50%)"
  },
  {
    "color": "puce",
    "display": "Puce",
    "dark": "hsl(345, 6%, 24%)",
    "light": "hsl(347, 7%, 27%)",
    "highlight": "hsl(344, 23%, 59%)"
  },
  {
    "color": "crimson",
    "display": "Crimson",
    "dark": "hsl(353, 18%, 20%)",
    "light": "hsl(357, 16%, 22%)",
    "highlight": "hsl(354, 68%, 31%)"
  }
];

  
  const versionSelector = document.querySelector('.version-select');
  const qlabVersions = versionSelector.querySelectorAll('img');
  const versionLabels = versionSelector.querySelectorAll('.version-label');
  const colorContainer = document.querySelector('.color-container');
  const displayText = document.getElementById("text-display");
  const syntaxSelector = document.querySelector(".syntax-options");
  const syntaxChoice = syntaxSelector.querySelectorAll('input');

  let selectedVersion;
  let allColors;
  let selectedColor;
  let displayTimer;
  let selectedSyntax = "color-quotations";
  let clipboardContent;
  let appId;
  let highlightColor;
 
  qlabVersions.forEach((img) => {
    img.addEventListener('click', () => {
        qlabVersions.forEach((img) => {
            img.classList.remove('selected')
        });
        img.classList.add('selected');
        let selectedVersion = img.id;
        displayColors(selectedVersion);
        });
    });

    syntaxChoice.forEach((radio) => {
      radio.addEventListener('click', () => {
          selectedSyntax = radio.id;
      });
  });
  
function displayColors(version) {
  if (version == "qlab4") {
    selectedVersion= QLAB4_COLORS;
    appId = "com.figure53.QLab.4"
  } else {
    selectedVersion = QLAB5_COLORS;
    appId = "com.figure53.QLab.5";
  }
  colorContainer.innerHTML = "<div></div>";

  selectedVersion.forEach((color) => {
      colorContainer.innerHTML += `
      <div class="color" id="${color.color}">
      <div class="dark" style="background-color: ${color.dark};">${color.display}</div>
      <div class="light" style="background-color: ${color.light};"></div>
  </div>
  `
  });
  colorEvents(); // Updates event listeners for selected version
};



function colorEvents() {
  allColors = document.querySelectorAll('.color');

  allColors.forEach((color) => {
    color.addEventListener('click', () => {
      addColorToClipboard(color.id);
    })
  });

  allColors.forEach((color) => {
    color.addEventListener('mouseenter', () => {
      selectedColor = color.id;
      var colorObject = selectedVersion.filter(obj => {
        return obj.color === selectedColor;
      })
      document.getElementById(selectedColor).style.boxShadow = `0 0 10px ${colorObject[0].highlight}`;
      highlightColor = colorObject[0].highlight;
    })
  });

allColors.forEach((color) => {
    color.addEventListener('mouseleave', () => {
      selectedColor = color.id;
      var colorObject = selectedVersion.filter(obj => {
        return obj.color === selectedColor;
      });
      document.getElementById(selectedColor).style.boxShadow = "none";
    });
  });
};


function addColorToClipboard(selectedColor) {
  let clipboardString;
  let displayString;

  switch (selectedSyntax) {
    case 'color-quotations':
      clipboardString = `"${selectedColor}"`;
      displayString = `"${selectedColor}" copied to clipboard`;
      break;
    case 'color-only':
      clipboardString = `${selectedColor}`;
      displayString = `${selectedColor} copied to clipboard`;
      break;
    case 'color-syntax':
      clipboardString = `
      tell application id "${appId}" to tell front workspace
      set selectedCues to items of (selected as list)
      repeat with theCue in selectedCues
        set q color of theCue to "${selectedColor}"
      end repeat
      end tell
      `
      displayString = `"${selectedColor}" (with script) copied to clipboard`
  };

  navigator.clipboard.writeText(clipboardString);
  displayText.style.border = `solid ${highlightColor}`;
  displayText.textContent = displayString;
  displayText.style.padding = "20px"

  clearTimeout(displayTimer);
  displayTimer = setTimeout(() => {
    displayText.textContent = "";
    displayText.style.border = `none`;
    displayText.style.padding = "";
    }, "2000");
};

const instructionsBtn = document.getElementById("instructions-btn");
var instructionsWindow = document.getElementById("instructions-popup");
var closeButton = document.getElementById("close-btn");

instructionsBtn.addEventListener("click", function(event) {
  event.preventDefault();
  if (instructionsWindow.style.display === "block") {
    instructionsWindow.style.opacity = 0;
   setTimeout(function () {
    instructionsWindow.style.display = 'none'
   }, 400);
  } else {
    instructionsWindow.style.display = "block";
    setTimeout(function () {
        instructionsWindow.style.opacity = 1;
      }, 40);
  }
});

closeButton.addEventListener("click", function() {
    instructionsWindow.style.opacity = 0;
    setTimeout(function () {
     instructionsWindow.style.display = 'none'
    }, 400);
});